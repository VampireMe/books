# 共有流程
***

&emsp;&emsp;
从概述中了解到 nginx 启动分为三种方式，虽然各有不同，但也有一段相同的流程。
在这一节中将对 nginx 启动阶段的共用流程进行讨论。

&emsp;&emsp;
共有流程的代码主要集中在 ngx_cycle.c、ngx_process.c、ngx_process_cycle.c 和 ngx_event.c 这四个文件中。
这一节只讨论 nginx 的框架代码，而与 http 相关的模块代码会在后面进行分析。

&emsp;&emsp;
共有流程开始于解析 nginx 配置，这个过程集中在 ngx_init_cycle 函数中。
ngx_init_cycle 是 nginx 的一个核心函数，共有流程中与配置相关的几个过程都在这个函数中实现，其中包括解析 nginx 配置、初始化 CORE 模块，接着是初始化文件句柄，初始化错误日志，初始化共享内存，然后是监听端口。
可以说共有流程 80% 都是现在 ngx_init_cycle 函数中。

&emsp;&emsp;
在具体介绍以前，先解决一个概念问题——什么叫 cycle？

&emsp;&emsp;
cycle 就是周期的意思，对应着一次启动过程。
也就是说不论发生了上节介绍的三种启动方式的哪一种，nginx 都会创建一个新的 cycle 与这次启动对应。