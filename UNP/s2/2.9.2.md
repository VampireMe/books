# SO_ERROR
***

&emsp;&emsp;
当一个套接字发生错误时，协议模块内部 so\_error 会被设置成为 Exx 错误码，称它为套接字的待处理错误 (pending error)，内核能够以下面两种方式之一立刻通知进程这个错误：

+ IO 复用通知可读可写
+ 信号驱动 IO 发起 SIGIO 信号

&emsp;&emsp;
通知之后可以使用 getsockopt 来获取这个错误，也可以直接进行读写然后来得到这个错误，然后 so\_error 清零。
如果使用读写来获得这个错误，有数据进行读写时正常进行，没有时返回 -1，并且 errno 会被置为 so\_error。
对于读取的话如果是正常关闭连接，read 返回为 0，如果为异常关闭，比如 RST 分节，会返回对应的错误。
这个选项只允许获取而不允许修改。