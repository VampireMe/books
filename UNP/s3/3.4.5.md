# 快速恢复算法
***

&emsp;&emsp;
快速重传算法一旦发现需要重传，那么立刻会调用快速恢复算法。
使用的是拥塞算法部分的主体而不是慢启动算法部分的主体，原因也非常简单，就是因为触发快速重传算法，是因为接收端返回了重复的 ACK 并且将之前发送端发送的数据丢弃了，所以网络应该处于一个非拥塞并且流畅的状态。
那么这个时候可以适当扩大拥塞窗口的大小，快速地发送缺失的部分来进行重传。
这里需要对于拥塞算法部分进行一些修改。

+ 当第一次收到 3ACK 的时候，ssthresh 减半，然后 cwnd = ssthresh / max\_segment\_size + 3，重传丢失报文
+ 如果见到的还是重复 ACK，那么 cwnd 加 1
+ 如果是接收到数据 ACK，那么 cwnd = ssthresh / max\_segment\_size，这个时候回复正常

&emsp;&emsp;
参数没有必要深究，之所以这个时候可以 cwnd 加 1 不断地提高拥塞窗口大小，是因为这个如果接收到还是重复 ACK，对端是会将刚才发送的数据丢弃的，网络上面是有流动数据而没有发生拥塞，这个原因和为什么 3ACK 之后就可以使用拥塞避免而不是慢启动原因是一样的。
思想就是一旦需要快速重传，应该尽可能地提高拥塞窗口大小，一旦正常运行，那么将拥塞窗口回复原来的水平，使用原有逻辑。