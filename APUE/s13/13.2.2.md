# 实现
***

&emsp;&emsp;
实现上，所有的锁都是挂在在 v 节点表之后，以链表形式挂接：

    struct lockf {
        struct  lockf* next;
        flag_t  flag;           // 标识
        off_t   start;          // 起始偏移量
        off_t   len;            // 长度
        pid_t   pid;            // 是什么进程尝试锁住文件的
    };

&emsp;&emsp;
锁里保存了是什么进程锁住文件，所以子进程并不能够继承父进程的锁，而 exec 可以。