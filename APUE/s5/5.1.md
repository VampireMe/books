# 流和定向
***

&emsp;&emsp;
对于文件 IO，所有 IO 函数都是针对文件描述符展开的。
而对于标准 IO，所有函数都只针对流展开的。
管理的结构是 FILE，通常是一个结构体，通常里面包含了：

+ 文件 fd
+ 缓冲区指针
+ 缓冲区长度
+ 当前缓冲区读取长度
+ 出错标志

&emsp;&emsp;
大部分标准 IO 使用的都是 FILE* 结构体指针来操作的。

&emsp;&emsp;
使用函数 fileno 可以得到 fd。
而对于其他字段，因为本身就是一个 struct 结构，只需要阅读 stdio.h 里面的 FILE 结构就可以看到每个字段的意思并且可以得到它们。

&emsp;&emsp;
流的定向 (stream's orientation) 决定了所读写的字符是单字节还是多字节的。
一个流最初创建的时候并没有定向，直到第一次使用的时候才被确定。
有两个函数可以修改流的定向：

    freopen                     // 这个函数清除了流的定向
    fwide(FILE* fp,int mode)    // 这个函数修改流的定向

&emsp;&emsp;
@todo: 为什么需要使用宽字符。
是否使用宽字符的话，那么很多编码方面的问题就可以在标准 IO 层面操作而不需要上层操作呢？

&emsp;&emsp;
对于文件 IO 使用了 0、1、2 分别表示标准输入，输出和错误，对应的标准 IO 也提供了预定义的三个流来，分别是 stdin、stdout 和 stderr。